<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Grocery & Meal Planner</title>
  <meta name="description" content="Plan your meals and manage your grocery shopping in one place">
  <meta name="theme-color" content="#4CAF50">
  <link rel="manifest" href="manifest.json">
  <link rel="apple-touch-icon" href="icons/icon-192x192.png">
  <link rel="stylesheet" href="./src/styles/main.css">
  <style>
    /* Additional inline styles to ensure the static version works */
    .list-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0.5rem 0.75rem;
      border-bottom: 1px solid #eee;
      max-width: 100%;
    }
    
    .list-item > div {
      flex: 1;
      min-width: 0;
    }
    
    .meal-plan-table {
      width: 100%;
      border-collapse: collapse;
    }
    
    .meal-plan-table th {
      text-align: left;
      padding: 10px;
      background-color: #f8f9fa;
      border-bottom: 2px solid #dee2e6;
    }
    
    .meal-plan-table td {
      padding: 10px;
      border-bottom: 1px solid #dee2e6;
    }

    /* Recipe styles */
    .recipe-card {
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      overflow: hidden;
      margin-bottom: 1.5rem;
      background-color: white;
    }
    
    .recipe-image {
      width: 100%;
      height: 200px;
      object-fit: cover;
    }
    
    .recipe-content {
      padding: 1rem;
    }
    
    .recipe-title {
      font-size: 1.25rem;
      margin-bottom: 0.5rem;
      font-weight: 600;
    }
    
    .recipe-meta {
      display: flex;
      margin-bottom: 1rem;
      color: #666;
      font-size: 0.9rem;
    }
    
    .recipe-meta div {
      margin-right: 1rem;
    }
    
    .recipe-ingredients {
      margin-bottom: 1rem;
    }
    
    .recipe-instructions {
      line-height: 1.6;
    }
    
    .recipe-actions {
      display: flex;
      justify-content: space-between;
      margin-top: 1rem;
    }
    
    /* Tabs */
    .tabs {
      display: flex;
      margin-bottom: 1rem;
      border-bottom: 1px solid #ddd;
    }
    
    .tab {
      padding: 0.5rem 1rem;
      cursor: pointer;
      border-bottom: 2px solid transparent;
    }
    
    .tab.active {
      border-bottom: 2px solid #4CAF50;
      font-weight: 500;
    }
    
    /* Recipe detail page */
    .recipe-detail {
      background: white;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      overflow: hidden;
    }
    
    .recipe-detail-image {
      width: 100%;
      height: 300px;
      object-fit: cover;
    }
    
    .recipe-detail-content {
      padding: 1.5rem;
    }
    
    .recipe-detail-title {
      font-size: 1.8rem;
      margin-bottom: 1rem;
    }
    
    .recipe-detail-meta {
      display: flex;
      margin-bottom: 1.5rem;
      color: #666;
    }
    
    .recipe-detail-meta div {
      margin-right: 1.5rem;
      display: flex;
      align-items: center;
    }
    
    .recipe-detail-section {
      margin-bottom: 1.5rem;
    }
    
    .recipe-detail-section h3 {
      margin-bottom: 0.75rem;
      font-size: 1.25rem;
    }
    
    .ingredient-item {
      display: flex;
      align-items: center;
      margin-bottom: 0.5rem;
    }
    
    .ingredient-checkbox {
      margin-right: 0.75rem;
    }
    
    .instruction-step {
      margin-bottom: 1rem;
      padding-left: 2rem;
      position: relative;
    }
    
    .instruction-step:before {
      content: attr(data-step);
      position: absolute;
      left: 0;
      font-weight: 600;
      color: #4CAF50;
    }

    /* Clean link style for navbar */
    .nav-links {
      background-color: rgba(255,255,255,0.9); 
      display: inline-flex; 
      padding: 8px 16px; 
      border-radius: 50px;
    }
    
    .nav-links li a {
      color: #333; 
      margin: 0 12px;
      text-decoration: none;
      padding: 5px 8px;
      border-radius: 4px;
      transition: background-color 0.2s;
      font-weight: 500;
    }
    
    .nav-links li a:hover {
      background-color: rgba(76, 175, 80, 0.1);
    }
    
    /* Add meal button - consistent style */
    .btn-add-meal-inline {
      background: none;
      border: none;
      color: #4CAF50;
      cursor: pointer;
      font-size: 0.85rem;
      padding: 2px 8px;
      text-align: left;
      border-radius: 4px;
    }
    
    .btn-add-meal-inline:hover {
      background-color: rgba(76, 175, 80, 0.1);
    }
    
    /* Remove underlines from all links and buttons */
    a, button, .btn {
      text-decoration: none !important;
    }
  </style>
</head>
<body>
  <div id="root">
    <!-- Static Home Page Content -->
    <div>
      <header class="navbar">
        <div style="width: 100%; position: relative;">
          <div style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(rgba(0,0,0,0.3), rgba(0,0,0,0.5))"></div>
          <img src="https://images.unsplash.com/photo-1490818387583-1baba5e638af?w=1200&auto=format&fit=crop" alt="Fresh food banner" style="width: 100%; height: 200px; object-fit: cover; border-radius: 8px;">
          <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center; width: 100%;">
            <h1 style="color: white; text-shadow: 1px 1px 3px rgba(0,0,0,0.7); margin-bottom: 10px;">Grocery & Meal Planner</h1>
            <nav>
              <ul class="nav-links">
                <li><a href="#home">Home</a></li>
                <li><a href="#groceries">Groceries</a></li>
                <li><a href="#meals">Meal Plan</a></li>
                <li><a href="#recipes">Recipes</a></li>
              </ul>
            </nav>
          </div>
        </div>
      </header>
      
      <main class="container">
        <div class="mt-3 text-center">
          <h2>Welcome to Your Grocery & Meal Planner</h2>
          <p class="mb-3">Manage your grocery lists and plan your meals in one place</p>
        </div>
        
        <div class="grid mt-3">
          <div class="card">
            <div style="height: 160px; overflow: hidden; border-radius: 8px 8px 0 0; cursor: pointer;" onclick="document.getElementById('groceries').scrollIntoView({behavior: 'smooth'})">
              <img src="https://images.unsplash.com/photo-1506617564039-2f3b650b7010?w=600&auto=format&fit=crop" style="width: 100%; height: 100%; object-fit: cover;" alt="Grocery shopping">
            </div>
            <h3 class="card-title">Grocery Lists</h3>
            <p>Create and manage your grocery shopping lists</p>
            <a href="#groceries" class="btn mt-2">View Groceries</a>
          </div>
          
          <div class="card">
            <div style="height: 160px; overflow: hidden; border-radius: 8px 8px 0 0; cursor: pointer;" onclick="document.getElementById('meals').scrollIntoView({behavior: 'smooth'})">
              <img src="https://images.unsplash.com/photo-1547592180-85f173990554?w=600&auto=format&fit=crop" style="width: 100%; height: 100%; object-fit: cover;" alt="Meal planning">
            </div>
            <h3 class="card-title">Meal Planning</h3>
            <p>Plan your meals for the week ahead</p>
            <a href="#meals" class="btn mt-2">View Meal Plan</a>
          </div>
          
          <div class="card">
            <div style="height: 160px; overflow: hidden; border-radius: 8px 8px 0 0; cursor: pointer;" onclick="document.getElementById('recipes').scrollIntoView({behavior: 'smooth'})">
              <img src="https://images.unsplash.com/photo-1466637574441-749b8f19452f?w=600&auto=format&fit=crop" style="width: 100%; height: 100%; object-fit: cover;" alt="Recipe collection">
            </div>
            <h3 class="card-title">Recipes</h3>
            <p>Browse and save your favorite recipes</p>
            <button class="btn mt-2" onclick="document.getElementById('recipes').scrollIntoView({behavior: 'smooth'});">View Recipes</button>
          </div>
        </div>
        
        <!-- Grocery List Section -->
        <div id="groceries" class="card mt-3">
          <h2 class="card-title">My Grocery List</h2>
          
          <div class="tabs" style="margin-bottom: 1.5rem;">
            <div class="tab active" id="tab-grocery-list">Grocery List</div>
            <div class="tab" id="tab-weekly-essentials">Weekly Essentials</div>
          </div>
          
          <div id="grocery-list-content">
            <form class="mb-3">
              <div class="form-group">
                <input
                  type="text"
                  class="form-control"
                  placeholder="Add new item..."
                />
              </div>
              <div class="form-group">
                <input
                  type="text"
                  class="form-control"
                  placeholder="Quantity"
                />
              </div>
              <button type="submit" class="btn">Add Item</button>
            </form>
            
            <div class="mb-3" style="display: flex; gap: 10px;">
              <button id="remove-checked-items" class="btn btn-secondary">Remove Checked Items</button>
              <button id="remove-all-items" class="btn btn-secondary">Remove All Items</button>
            </div>
            
            <!-- Static Grocery List -->
            <div>
              <ul style="list-style: none; padding: 0;">
                <li class="list-item">
                  <div style="display: flex; align-items: center;">
                    <input type="checkbox" style="margin-right: 10px;">
                    <div>
                      <span style="margin-right: 10px; font-weight: 500;">Milk</span>
                      <span style="color: #666; font-size: 0.9rem;">1 gallon</span>
                    </div>
                  </div>
                  <button style="background: transparent; border: none; color: #ff6b6b; cursor: pointer; font-size: 1rem; margin-left: 15px;">‚úï</button>
                </li>
                <li class="list-item">
                  <div style="display: flex; align-items: center;">
                    <input type="checkbox" style="margin-right: 10px;">
                    <div>
                      <span style="margin-right: 10px; font-weight: 500;">Eggs</span>
                      <span style="color: #666; font-size: 0.9rem;">1 dozen</span>
                    </div>
                  </div>
                  <button style="background: transparent; border: none; color: #ff6b6b; cursor: pointer; font-size: 1rem; margin-left: 15px;">‚úï</button>
                </li>
                <li class="list-item">
                  <div style="display: flex; align-items: center;">
                    <input type="checkbox" checked style="margin-right: 10px;">
                    <div>
                      <span style="text-decoration: line-through; margin-right: 10px; font-weight: 500;">Bread</span>
                      <span style="color: #666; font-size: 0.9rem;">1 loaf</span>
                    </div>
                  </div>
                  <button style="background: transparent; border: none; color: #ff6b6b; cursor: pointer; font-size: 1rem; margin-left: 15px;">‚úï</button>
                </li>
                <li class="list-item">
                  <div style="display: flex; align-items: center;">
                    <input type="checkbox" style="margin-right: 10px;">
                    <div>
                      <span style="margin-right: 10px; font-weight: 500;">Apples</span>
                      <span style="color: #666; font-size: 0.9rem;">6</span>
                    </div>
                  </div>
                  <button style="background: transparent; border: none; color: #ff6b6b; cursor: pointer; font-size: 1rem; margin-left: 15px;">‚úï</button>
                </li>
              </ul>
            </div>
          </div>
          
          <div id="weekly-essentials-content" style="display: none;">
            <div class="mb-3">
              <p>Select items to add to your Weekly Essentials list. These items can be quickly added to your grocery list anytime.</p>
              <button id="add-all-essentials" class="btn">Add All Weekly Essentials to Grocery List</button>
            </div>
            
            <div>
              <form id="add-essential-form" class="mb-3">
                <div class="form-group">
                  <input
                    type="text"
                    id="essential-item"
                    class="form-control"
                    placeholder="Add new essential item..."
                  />
                </div>
                <div class="form-group">
                  <input
                    type="text"
                    id="essential-quantity"
                    class="form-control"
                    placeholder="Quantity"
                  />
                </div>
                <button type="submit" class="btn">Add to Essentials</button>
              </form>
              
              <ul id="weekly-essentials-list" style="list-style: none; padding: 0;">
                <li class="list-item">
                  <div style="display: flex; align-items: center;">
                    <div>
                      <span style="margin-right: 10px; font-weight: 500;">Milk</span>
                      <span style="color: #666; font-size: 0.9rem;">1 gallon</span>
                    </div>
                  </div>
                  <div>
                    <button class="btn-add-to-grocery" style="margin-right: 10px; background: none; border: none; color: #4CAF50; cursor: pointer; font-size: 0.85rem;">Add to Grocery</button>
                    <button style="background: transparent; border: none; color: #ff6b6b; cursor: pointer; font-size: 1rem; margin-left: 5px;">‚úï</button>
                  </div>
                </li>
                <li class="list-item">
                  <div style="display: flex; align-items: center;">
                    <div>
                      <span style="margin-right: 10px; font-weight: 500;">Bread</span>
                      <span style="color: #666; font-size: 0.9rem;">1 loaf</span>
                    </div>
                  </div>
                  <div>
                    <button class="btn-add-to-grocery" style="margin-right: 10px; background: none; border: none; color: #4CAF50; cursor: pointer; font-size: 0.85rem;">Add to Grocery</button>
                    <button style="background: transparent; border: none; color: #ff6b6b; cursor: pointer; font-size: 1rem; margin-left: 5px;">‚úï</button>
                  </div>
                </li>
                <li class="list-item">
                  <div style="display: flex; align-items: center;">
                    <div>
                      <span style="margin-right: 10px; font-weight: 500;">Eggs</span>
                      <span style="color: #666; font-size: 0.9rem;">1 dozen</span>
                    </div>
                  </div>
                  <div>
                    <button class="btn-add-to-grocery" style="margin-right: 10px; background: none; border: none; color: #4CAF50; cursor: pointer; font-size: 0.85rem;">Add to Grocery</button>
                    <button style="background: transparent; border: none; color: #ff6b6b; cursor: pointer; font-size: 1rem; margin-left: 5px;">‚úï</button>
                  </div>
                </li>
                <li class="list-item">
                  <div style="display: flex; align-items: center;">
                    <div>
                      <span style="margin-right: 10px; font-weight: 500;">Cheese</span>
                      <span style="color: #666; font-size: 0.9rem;">200g</span>
                    </div>
                  </div>
                  <div>
                    <button class="btn-add-to-grocery" style="margin-right: 10px; background: none; border: none; color: #4CAF50; cursor: pointer; font-size: 0.85rem;">Add to Grocery</button>
                    <button style="background: transparent; border: none; color: #ff6b6b; cursor: pointer; font-size: 1rem; margin-left: 5px;">‚úï</button>
                  </div>
                </li>
              </ul>
            </div>
          </div>
        </div>
        
        <!-- Meal Plan Section -->
        <div id="meals" class="card mt-3">
          <h2 class="card-title">Weekly Meal Plan</h2>
          
          <!-- Calendar Navigation -->
          <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
            <button id="prev-week" class="btn btn-secondary">‚Üê Previous Week</button>
            <h3 id="current-week-display" style="margin: 0;">April 1 - April 7, 2024</h3>
            <button id="next-week" class="btn btn-secondary">Next Week ‚Üí</button>
          </div>
          
          <!-- Calendar Meal Plan -->
          <div class="meal-plan">
            <table class="meal-plan-table">
              <thead>
                <tr>
                  <th style="width: 15%;">Day</th>
                  <th style="width: 85%;">Meals</th>
                </tr>
              </thead>
              <tbody id="meal-plan-body">
                <!-- Calendar rows will be generated by JavaScript -->
              </tbody>
            </table>
          </div>
          
          <div class="mt-3">
            <button class="btn" id="generate-shopping-list">Generate Shopping List</button>
            <button class="btn btn-secondary" style="margin-left: 1rem" id="save-meal-plan">Save Meal Plan</button>
          </div>
        </div>
        
        <!-- Recipes Section -->
        <div id="recipes" class="card mt-3">
          <h2 class="card-title">Recipes</h2>
          
          <!-- Recipe Tabs -->
          <div class="tabs">
            <div class="tab active" id="tab-all-recipes">All Recipes</div>
            <div class="tab" id="tab-favorites">Favorites</div>
            <div class="tab" id="tab-add-recipe">Add New Recipe</div>
          </div>
          
          <!-- Recipe Grid -->
          <div class="grid" id="all-recipes-grid">
            <!-- Recipe Card 1 -->
            <div class="recipe-card">
              <img src="https://images.unsplash.com/photo-1551183053-bf91a1d81141" alt="Spaghetti Bolognese" class="recipe-image" onclick="showRecipe('recipe1')" style="cursor: pointer;">
              <div class="recipe-content">
                <h3 class="recipe-title" onclick="showRecipe('recipe1')" style="cursor: pointer;">Spaghetti Bolognese</h3>
                <div class="recipe-meta">
                  <div>‚è∞ 30 min</div>
                  <div>üçΩÔ∏è 4 servings</div>
                </div>
                <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 0.5rem;">
                  <button class="btn" onclick="showRecipe('recipe1')">View Recipe</button>
                  <button class="btn-favorite" onclick="toggleFavorite('recipe1', 'Spaghetti Bolognese')" style="background: none; border: none; font-size: 1.5rem; cursor: pointer;">‚òÜ</button>
                </div>
              </div>
            </div>
            
            <!-- Recipe Card 2 -->
            <div class="recipe-card">
              <img src="https://images.unsplash.com/photo-1594834749740-74b3f6764be4" alt="Chicken Stir Fry" class="recipe-image" onclick="showRecipe('recipe2')" style="cursor: pointer;">
              <div class="recipe-content">
                <h3 class="recipe-title" onclick="showRecipe('recipe2')" style="cursor: pointer;">Chicken Stir Fry</h3>
                <div class="recipe-meta">
                  <div>‚è∞ 20 min</div>
                  <div>üçΩÔ∏è 2 servings</div>
                </div>
                <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 0.5rem;">
                  <button class="btn" onclick="showRecipe('recipe2')">View Recipe</button>
                  <button class="btn-favorite" onclick="toggleFavorite('recipe2', 'Chicken Stir Fry')" style="background: none; border: none; font-size: 1.5rem; cursor: pointer;">‚òÜ</button>
                </div>
              </div>
            </div>
            
            <!-- Recipe Card 3 -->
            <div class="recipe-card">
              <img src="https://images.unsplash.com/photo-1540189549336-e6e99c3679fe" alt="Vegetarian Salad Bowl" class="recipe-image" onclick="showRecipe('recipe3')" style="cursor: pointer;">
              <div class="recipe-content">
                <h3 class="recipe-title" onclick="showRecipe('recipe3')" style="cursor: pointer;">Vegetarian Salad Bowl</h3>
                <div class="recipe-meta">
                  <div>‚è∞ 15 min</div>
                  <div>üçΩÔ∏è 1 serving</div>
                </div>
                <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 0.5rem;">
                  <button class="btn" onclick="showRecipe('recipe3')">View Recipe</button>
                  <button class="btn-favorite" onclick="toggleFavorite('recipe3', 'Vegetarian Salad Bowl')" style="background: none; border: none; font-size: 1.5rem; cursor: pointer;">‚òÜ</button>
                </div>
              </div>
            </div>
          </div>
          
          <!-- Favorites Grid (Hidden by default) -->
          <div class="grid" id="favorites-grid" style="display: none;">
            <!-- Favorites will be populated by JavaScript -->
            <p id="no-favorites-message" style="text-align: center; padding: 2rem;">You haven't added any favorite recipes yet.</p>
          </div>
          
          <!-- Add New Recipe Form (Hidden by default) -->
          <div id="add-recipe-form" style="display: none;">
            <form id="new-recipe-form">
              <div class="form-group">
                <label for="recipe-name">Recipe Name:</label>
                <input type="text" id="recipe-name" class="form-control" required>
              </div>
              
              <div class="form-group">
                <label for="recipe-image-url">Image URL:</label>
                <input type="url" id="recipe-image-url" class="form-control" placeholder="https://example.com/image.jpg">
              </div>
              
              <div class="form-group">
                <label for="prep-time">Prep Time (minutes):</label>
                <input type="number" id="prep-time" class="form-control" min="0" required>
              </div>
              
              <div class="form-group">
                <label for="cook-time">Cook Time (minutes):</label>
                <input type="number" id="cook-time" class="form-control" min="0" required>
              </div>
              
              <div class="form-group">
                <label for="servings">Servings:</label>
                <input type="number" id="servings" class="form-control" min="1" required>
              </div>
              
              <div class="form-group">
                <label for="ingredients">Ingredients (one per line):</label>
                <textarea id="ingredients" class="form-control" rows="6" required></textarea>
              </div>
              
              <div class="form-group">
                <label for="instructions">Instructions (one step per line):</label>
                <textarea id="instructions" class="form-control" rows="6" required></textarea>
              </div>
              
              <button type="submit" class="btn">Add Recipe</button>
            </form>
          </div>
          
          <!-- Recipe Detail 1 -->
          <div id="recipe1" class="recipe-detail mt-3" style="display: none;">
            <img src="https://images.unsplash.com/photo-1551183053-bf91a1d81141" alt="Spaghetti Bolognese" class="recipe-detail-image">
            <div class="recipe-detail-content">
              <h2 class="recipe-detail-title">Spaghetti Bolognese</h2>
              <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                <div class="recipe-detail-meta">
                  <div>‚è∞ Prep: 10 min</div>
                  <div>üç≥ Cook: 20 min</div>
                  <div>üçΩÔ∏è Serves: 4</div>
                </div>
                <button class="btn" onclick="addToMealPlan('Spaghetti Bolognese')">Add to Meal Plan</button>
              </div>
              
              <div class="recipe-detail-section">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.75rem;">
                  <h3>Ingredients</h3>
                </div>
                <ul style="list-style: none; padding: 0;">
                  <li class="ingredient-item" style="margin-bottom: 0.75rem;">
                    <label style="display: flex; align-items: center; font-weight: bold; cursor: pointer;">
                      <input type="checkbox" id="select-all-recipe1" onchange="toggleAllIngredients('recipe1')" style="margin-right: 0.5rem;">
                      <span>Select All Ingredients</span>
                    </label>
                  </li>
                  <li class="ingredient-item">
                    <input type="checkbox" class="ingredient-checkbox">
                    <span>500g ground beef</span>
                  </li>
                  <li class="ingredient-item">
                    <input type="checkbox" class="ingredient-checkbox">
                    <span>1 onion, diced</span>
                  </li>
                  <li class="ingredient-item">
                    <input type="checkbox" class="ingredient-checkbox">
                    <span>2 garlic cloves, minced</span>
                  </li>
                  <li class="ingredient-item">
                    <input type="checkbox" class="ingredient-checkbox">
                    <span>1 carrot, diced</span>
                  </li>
                  <li class="ingredient-item">
                    <input type="checkbox" class="ingredient-checkbox">
                    <span>1 celery stalk, diced</span>
                  </li>
                  <li class="ingredient-item">
                    <input type="checkbox" class="ingredient-checkbox">
                    <span>400g canned tomatoes</span>
                  </li>
                  <li class="ingredient-item">
                    <input type="checkbox" class="ingredient-checkbox">
                    <span>2 tbsp tomato paste</span>
                  </li>
                  <li class="ingredient-item">
                    <input type="checkbox" class="ingredient-checkbox">
                    <span>1 tsp dried oregano</span>
                  </li>
                  <li class="ingredient-item">
                    <input type="checkbox" class="ingredient-checkbox">
                    <span>400g spaghetti</span>
                  </li>
                  <li class="ingredient-item">
                    <input type="checkbox" class="ingredient-checkbox">
                    <span>Parmesan cheese, grated</span>
                  </li>
                  <li class="ingredient-item">
                    <input type="checkbox" class="ingredient-checkbox">
                    <span>Salt and pepper to taste</span>
                  </li>
                </ul>
                <div style="margin-top: 1rem;">
                  <button class="btn btn-secondary" onclick="addIngredientsToList('recipe1')">Add Selected Ingredients to Shopping List</button>
                </div>
              </div>
              
              <div class="recipe-detail-section">
                <h3>Instructions</h3>
                <div class="recipe-detail-instructions">
                  <div class="instruction-step" data-step="1">
                    Heat oil in a large pan over medium heat. Add the onion, garlic, carrot, and celery. Cook until softened.
                  </div>
                  <div class="instruction-step" data-step="2">
                    Add the ground beef and cook until browned, breaking it up with a spoon.
                  </div>
                  <div class="instruction-step" data-step="3">
                    Add tomato paste and cook for 1 minute. Then add canned tomatoes, oregano, salt, and pepper.
                  </div>
                  <div class="instruction-step" data-step="4">
                    Simmer for at least 15 minutes, or up to 1 hour for deeper flavor.
                  </div>
                  <div class="instruction-step" data-step="5">
                    Meanwhile, cook spaghetti according to package instructions.
                  </div>
                  <div class="instruction-step" data-step="6">
                    Drain pasta and serve with the sauce on top. Sprinkle with grated Parmesan cheese.
                  </div>
                </div>
              </div>
              
              <div class="recipe-actions mt-3">
                <button class="btn" onclick="hideRecipe('recipe1')">Back to Recipes</button>
              </div>
            </div>
          </div>
          
          <!-- Recipe Detail 2 -->
          <div id="recipe2" class="recipe-detail mt-3" style="display: none;">
            <img src="https://images.unsplash.com/photo-1594834749740-74b3f6764be4" alt="Chicken Stir Fry" class="recipe-detail-image">
            <div class="recipe-detail-content">
              <h2 class="recipe-detail-title">Chicken Stir Fry</h2>
              <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                <div class="recipe-detail-meta">
                  <div>‚è∞ Prep: 10 min</div>
                  <div>üç≥ Cook: 10 min</div>
                  <div>üçΩÔ∏è Serves: 2</div>
                </div>
                <button class="btn" onclick="addToMealPlan('Chicken Stir Fry')">Add to Meal Plan</button>
              </div>
              
              <div class="recipe-detail-section">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.75rem;">
                  <h3>Ingredients</h3>
                </div>
                <ul style="list-style: none; padding: 0;">
                  <li class="ingredient-item" style="margin-bottom: 0.75rem;">
                    <label style="display: flex; align-items: center; font-weight: bold; cursor: pointer;">
                      <input type="checkbox" id="select-all-recipe2" onchange="toggleAllIngredients('recipe2')" style="margin-right: 0.5rem;">
                      <span>Select All Ingredients</span>
                    </label>
                  </li>
                  <li class="ingredient-item">
                    <input type="checkbox" class="ingredient-checkbox">
                    <span>300g chicken breast, sliced</span>
                  </li>
                  <li class="ingredient-item">
                    <input type="checkbox" class="ingredient-checkbox">
                    <span>1 bell pepper, sliced</span>
                  </li>
                  <li class="ingredient-item">
                    <input type="checkbox" class="ingredient-checkbox">
                    <span>1 carrot, julienned</span>
                  </li>
                  <li class="ingredient-item">
                    <input type="checkbox" class="ingredient-checkbox">
                    <span>1 cup broccoli florets</span>
                  </li>
                  <li class="ingredient-item">
                    <input type="checkbox" class="ingredient-checkbox">
                    <span>2 garlic cloves, minced</span>
                  </li>
                  <li class="ingredient-item">
                    <input type="checkbox" class="ingredient-checkbox">
                    <span>1 tbsp ginger, grated</span>
                  </li>
                  <li class="ingredient-item">
                    <input type="checkbox" class="ingredient-checkbox">
                    <span>3 tbsp soy sauce</span>
                  </li>
                  <li class="ingredient-item">
                    <input type="checkbox" class="ingredient-checkbox">
                    <span>1 tbsp sesame oil</span>
                  </li>
                  <li class="ingredient-item">
                    <input type="checkbox" class="ingredient-checkbox">
                    <span>2 cups cooked rice</span>
                  </li>
                </ul>
                <div style="margin-top: 1rem;">
                  <button class="btn btn-secondary" onclick="addIngredientsToList('recipe2')">Add Selected Ingredients to Shopping List</button>
                </div>
              </div>
              
              <div class="recipe-detail-section">
                <h3>Instructions</h3>
                <div class="recipe-detail-instructions">
                  <div class="instruction-step" data-step="1">
                    Heat oil in a wok or large frying pan over high heat.
                  </div>
                  <div class="instruction-step" data-step="2">
                    Add chicken and cook until no longer pink.
                  </div>
                  <div class="instruction-step" data-step="3">
                    Add garlic and ginger, stir for 30 seconds until fragrant.
                  </div>
                  <div class="instruction-step" data-step="4">
                    Add vegetables and stir-fry for 3-4 minutes until crisp-tender.
                  </div>
                  <div class="instruction-step" data-step="5">
                    Add soy sauce and sesame oil, toss to combine.
                  </div>
                  <div class="instruction-step" data-step="6">
                    Serve hot over cooked rice.
                  </div>
                </div>
              </div>
              
              <div class="recipe-actions mt-3">
                <button class="btn" onclick="hideRecipe('recipe2')">Back to Recipes</button>
              </div>
            </div>
          </div>
          
          <!-- Recipe Detail 3 -->
          <div id="recipe3" class="recipe-detail mt-3" style="display: none;">
            <img src="https://images.unsplash.com/photo-1540189549336-e6e99c3679fe" alt="Vegetarian Salad Bowl" class="recipe-detail-image">
            <div class="recipe-detail-content">
              <h2 class="recipe-detail-title">Vegetarian Salad Bowl</h2>
              <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                <div class="recipe-detail-meta">
                  <div>‚è∞ Prep: 15 min</div>
                  <div>üç≥ Cook: 0 min</div>
                  <div>üçΩÔ∏è Serves: 1</div>
                </div>
                <button class="btn" onclick="addToMealPlan('Vegetarian Salad Bowl')">Add to Meal Plan</button>
              </div>
              
              <div class="recipe-detail-section">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.75rem;">
                  <h3>Ingredients</h3>
                </div>
                <ul style="list-style: none; padding: 0;">
                  <li class="ingredient-item" style="margin-bottom: 0.75rem;">
                    <label style="display: flex; align-items: center; font-weight: bold; cursor: pointer;">
                      <input type="checkbox" id="select-all-recipe3" onchange="toggleAllIngredients('recipe3')" style="margin-right: 0.5rem;">
                      <span>Select All Ingredients</span>
                    </label>
                  </li>
                  <li class="ingredient-item">
                    <input type="checkbox" class="ingredient-checkbox">
                    <span>2 cups mixed greens</span>
                  </li>
                  <li class="ingredient-item">
                    <input type="checkbox" class="ingredient-checkbox">
                    <span>1/2 avocado, sliced</span>
                  </li>
                  <li class="ingredient-item">
                    <input type="checkbox" class="ingredient-checkbox">
                    <span>1/4 cup cherry tomatoes, halved</span>
                  </li>
                  <li class="ingredient-item">
                    <input type="checkbox" class="ingredient-checkbox">
                    <span>1/4 cucumber, sliced</span>
                  </li>
                  <li class="ingredient-item">
                    <input type="checkbox" class="ingredient-checkbox">
                    <span>1/4 cup chickpeas, drained and rinsed</span>
                  </li>
                  <li class="ingredient-item">
                    <input type="checkbox" class="ingredient-checkbox">
                    <span>2 tbsp feta cheese, crumbled</span>
                  </li>
                  <li class="ingredient-item">
                    <input type="checkbox" class="ingredient-checkbox">
                    <span>1 tbsp olive oil</span>
                  </li>
                  <li class="ingredient-item">
                    <input type="checkbox" class="ingredient-checkbox">
                    <span>1 tbsp lemon juice</span>
                  </li>
                  <li class="ingredient-item">
                    <input type="checkbox" class="ingredient-checkbox">
                    <span>Salt and pepper to taste</span>
                  </li>
                </ul>
                <div style="margin-top: 1rem;">
                  <button class="btn btn-secondary" onclick="addIngredientsToList('recipe3')">Add Selected Ingredients to Shopping List</button>
                </div>
              </div>
              
              <div class="recipe-detail-section">
                <h3>Instructions</h3>
                <div class="recipe-detail-instructions">
                  <div class="instruction-step" data-step="1">
                    Place mixed greens in a bowl as the base.
                  </div>
                  <div class="instruction-step" data-step="2">
                    Arrange avocado, cherry tomatoes, cucumber, and chickpeas on top.
                  </div>
                  <div class="instruction-step" data-step="3">
                    Sprinkle with feta cheese.
                  </div>
                  <div class="instruction-step" data-step="4">
                    Whisk together olive oil, lemon juice, salt and pepper to make the dressing.
                  </div>
                  <div class="instruction-step" data-step="5">
                    Drizzle the dressing over the salad and serve immediately.
                  </div>
                </div>
              </div>
              
              <div class="recipe-actions mt-3">
                <button class="btn" onclick="hideRecipe('recipe3')">Back to Recipes</button>
              </div>
            </div>
          </div>
        </div>
      </main>
      
      <footer class="text-center mt-3">
        <p>Grocery & Meal Planner - Your personal food organizer</p>
      </footer>
    </div>
  </div>
  
  <!-- JavaScript for recipe functionality -->
  <script>
    // Calendar and Date functions
    let currentStartDate = new Date();
    // Set to beginning of current week (Monday)
    currentStartDate.setDate(currentStartDate.getDate() - currentStartDate.getDay() + (currentStartDate.getDay() === 0 ? -6 : 1));
    
    // Store meal plans by date
    const mealPlans = {};
    
    // Function to format date as YYYY-MM-DD
    function formatDate(date) {
      return `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}-${String(date.getDate()).padStart(2, '0')}`;
    }
    
    // Function to format date as Month Day
    function formatDateDisplay(date) {
      const options = { month: 'short', day: 'numeric' };
      return date.toLocaleDateString('en-US', options);
    }
    
    // Function to update the calendar display
    function updateCalendar() {
      const weekDisplay = document.getElementById('current-week-display');
      const mealPlanBody = document.getElementById('meal-plan-body');
      
      // Clear existing rows
      mealPlanBody.innerHTML = '';
      
      // Update week display
      const endDate = new Date(currentStartDate);
      endDate.setDate(endDate.getDate() + 6);
      weekDisplay.textContent = `${formatDateDisplay(currentStartDate)} - ${formatDateDisplay(endDate)}, ${endDate.getFullYear()}`;
      
      // Generate rows for each day of the week
      for (let i = 0; i < 7; i++) {
        const currentDate = new Date(currentStartDate);
        currentDate.setDate(currentDate.getDate() + i);
        const dateString = formatDate(currentDate);
        
        // Get day of week name
        const days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];
        const dayName = days[currentDate.getDay()];
        
        // Create row
        const row = document.createElement('tr');
        
        // Highlight today's date
        const isToday = formatDate(new Date()) === dateString;
        if (isToday) {
          row.style.backgroundColor = '#f0f8ff';
        }
        
        // Get meal plan for this date (or create empty one)
        if (!mealPlans[dateString]) {
          mealPlans[dateString] = {
            meals: []
          };
        }
        
        // Create cells
        const dayCell = document.createElement('td');
        dayCell.innerHTML = `<strong>${dayName}</strong><br><span style="font-size: 0.8rem;">${formatDateDisplay(currentDate)}</span>`;
        row.appendChild(dayCell);
        
        // Create meals cell
        const mealsCell = document.createElement('td');
        
        // For the first week (initial data), add some sample meals
        if (mealPlans[dateString].meals.length === 0 && i < 2) {
          if (i === 0) {
            mealPlans[dateString].meals.push('Oatmeal');
            mealPlans[dateString].meals.push('Spaghetti Bolognese');
          }
          if (i === 1) {
            mealPlans[dateString].meals.push('Chicken Stir Fry');
          }
        }
        
        // Create container for meal items
        const mealContainer = document.createElement('div');
        mealContainer.style.display = 'flex';
        mealContainer.style.flexDirection = 'column';
        mealContainer.style.gap = '8px';
        
        // Add each meal
        if (mealPlans[dateString].meals.length > 0) {
          mealPlans[dateString].meals.forEach((meal, index) => {
            const mealItem = document.createElement('div');
            mealItem.className = 'planned-meal';
            mealItem.dataset.meal = meal;
            mealItem.style.cursor = 'pointer';
            mealItem.style.padding = '0.5rem';
            mealItem.style.backgroundColor = '#e8f5e9';
            mealItem.style.borderRadius = '4px';
            mealItem.style.border = '1px solid #c8e6c9';
            mealItem.style.display = 'flex';
            mealItem.style.justifyContent = 'space-between';
            mealItem.style.alignItems = 'center';
            
            mealItem.innerHTML = `
              <span style="font-weight: 500;">${meal}</span>
              <div style="display: flex; gap: 8px;">
                <button class="btn-edit-meal" style="border: none; background: none; color: #4CAF50; padding: 0; cursor: pointer; font-size: 0.8rem;">Edit</button>
                <button class="btn-clear-meal" data-index="${index}" style="border: none; background: none; color: #ff6b6b; padding: 0; cursor: pointer; font-size: 0.8rem;">Remove</button>
              </div>
            `;
            
            mealContainer.appendChild(mealItem);
            
            // Add click event to navigate to recipe
            mealItem.addEventListener('click', function() {
              navigateToRecipe(this.dataset.meal);
            });
            
            // Add event for edit button
            const editButton = mealItem.querySelector('.btn-edit-meal');
            editButton.addEventListener('click', function(e) {
              e.stopPropagation();
              replaceMeal(dateString, index);
            });
            
            // Add event for clear button
            const clearButton = mealItem.querySelector('.btn-clear-meal');
            clearButton.addEventListener('click', function(e) {
              e.stopPropagation();
              const mealIndex = parseInt(this.dataset.index);
              mealPlans[dateString].meals.splice(mealIndex, 1);
              updateCalendar();
            });
          });
        }
        
        // Add the "Add Meal" button for all days (consistent style)
        const addMealInline = document.createElement('div');
        addMealInline.style.display = 'flex';
        addMealInline.style.justifyContent = 'flex-start';
        addMealInline.style.marginTop = '6px';
        
        const addButton = document.createElement('button');
        addButton.className = 'btn-add-meal-inline';
        addButton.textContent = mealPlans[dateString].meals.length > 0 ? '+ Add Another Meal' : '+ Add Meal';
        addButton.addEventListener('click', function() {
          addMealToDate(dateString);
        });
        
        addMealInline.appendChild(addButton);
        mealContainer.appendChild(addMealInline);
        
        mealsCell.appendChild(mealContainer);
        row.appendChild(mealsCell);
        
        mealPlanBody.appendChild(row);
      }
    }
    
    // Navigate to previous week
    document.getElementById('prev-week').addEventListener('click', function() {
      currentStartDate.setDate(currentStartDate.getDate() - 7);
      updateCalendar();
    });
    
    // Navigate to next week
    document.getElementById('next-week').addEventListener('click', function() {
      currentStartDate.setDate(currentStartDate.getDate() + 7);
      updateCalendar();
    });
    
    // Function to add a meal to a specific date
    function addMealToDate(dateString) {
      const mealPlanModal = createMealPlanModal(dateString);
      document.body.appendChild(mealPlanModal);
    }
    
    // Function to replace a meal at a specific index
    function replaceMeal(dateString, mealIndex) {
      const mealPlanModal = createMealPlanModal(dateString, mealIndex);
      document.body.appendChild(mealPlanModal);
    }
    
    // Function to create the meal plan modal
    function createMealPlanModal(dateString, mealIndex = -1) {
      // Create overlay
      const overlay = document.createElement('div');
      overlay.style.position = 'fixed';
      overlay.style.top = '0';
      overlay.style.left = '0';
      overlay.style.width = '100%';
      overlay.style.height = '100%';
      overlay.style.backgroundColor = 'rgba(0,0,0,0.5)';
      overlay.style.zIndex = '999';
      overlay.id = 'overlay';
      document.body.appendChild(overlay);
      
      const mealPlanModal = document.createElement('div');
      mealPlanModal.className = 'card';
      mealPlanModal.style.position = 'fixed';
      mealPlanModal.style.top = '50%';
      mealPlanModal.style.left = '50%';
      mealPlanModal.style.transform = 'translate(-50%, -50%)';
      mealPlanModal.style.padding = '20px';
      mealPlanModal.style.zIndex = '1000';
      mealPlanModal.style.maxWidth = '500px';
      mealPlanModal.style.width = '90%';
      mealPlanModal.style.maxHeight = '80vh';
      mealPlanModal.style.overflowY = 'auto';
      mealPlanModal.style.boxShadow = '0 4px 12px rgba(0,0,0,0.15)';
      mealPlanModal.id = 'meal-plan-modal';
      
      const title = mealIndex >= 0 ? 'Edit Meal' : 'Add Meal';
      const formattedDate = new Date(dateString).toLocaleDateString('en-US', { weekday: 'long', month: 'short', day: 'numeric' });
      
      mealPlanModal.innerHTML = `
        <h3>${title} for ${formattedDate}</h3>
        <div class="tabs">
          <div class="tab active" id="tab-recipes">From Recipes</div>
          <div class="tab" id="tab-custom">Custom Meal</div>
        </div>
        
        <div id="content-recipes" style="margin-top: 1rem;">
          <div class="form-group">
            <label>Choose a recipe:</label>
            <select id="recipe-select" class="form-control">
              <option value="Spaghetti Bolognese">Spaghetti Bolognese</option>
              <option value="Chicken Stir Fry">Chicken Stir Fry</option>
              <option value="Vegetarian Salad Bowl">Vegetarian Salad Bowl</option>
            </select>
          </div>
        </div>
        
        <div id="content-custom" style="margin-top: 1rem; display: none;">
          <div class="form-group">
            <label>Enter meal name:</label>
            <input type="text" id="custom-meal" class="form-control" placeholder="e.g., Pizza">
          </div>
        </div>
        
        <div style="display: flex; justify-content: space-between; margin-top: 20px;">
          <button class="btn btn-secondary" onclick="closeMealPlanModal()">Cancel</button>
          <button class="btn" onclick="confirmAddMeal('${dateString}', ${mealIndex})">${mealIndex >= 0 ? 'Update Meal' : 'Add Meal'}</button>
        </div>
      `;
      
      // Add tab switching functionality
      setTimeout(() => {
        document.getElementById('tab-recipes').addEventListener('click', function() {
          this.classList.add('active');
          document.getElementById('tab-custom').classList.remove('active');
          document.getElementById('content-recipes').style.display = 'block';
          document.getElementById('content-custom').style.display = 'none';
        });
        
        document.getElementById('tab-custom').addEventListener('click', function() {
          this.classList.add('active');
          document.getElementById('tab-recipes').classList.remove('active');
          document.getElementById('content-recipes').style.display = 'none';
          document.getElementById('content-custom').style.display = 'block';
        });
      }, 0);
      
      return mealPlanModal;
    }
    
    // Function to confirm adding a meal
    function confirmAddMeal(dateString, mealIndex) {
      let mealName = '';
      
      // Check which tab is active
      if (document.getElementById('tab-recipes').classList.contains('active')) {
        mealName = document.getElementById('recipe-select').value;
      } else {
        mealName = document.getElementById('custom-meal').value;
        if (!mealName.trim()) {
          alert('Please enter a meal name');
          return;
        }
      }
      
      // Make sure the meal plan for this date exists
      if (!mealPlans[dateString]) {
        mealPlans[dateString] = {
          meals: []
        };
      }
      
      // Either update existing meal or add new one
      if (mealIndex >= 0) {
        mealPlans[dateString].meals[mealIndex] = mealName;
      } else {
        mealPlans[dateString].meals.push(mealName);
      }
      
      // Close the modal
      closeMealPlanModal();
      
      // Update the calendar
      updateCalendar();
      
      // Show a confirmation message
      const action = mealIndex >= 0 ? 'updated' : 'added';
      alert(`${mealName} ${action} to your meal plan!`);
    }
    
    // Function to navigate to a recipe
    function navigateToRecipe(recipeName) {
      // Map recipe names to their IDs
      const recipeMap = {
        'Spaghetti Bolognese': 'recipe1',
        'Chicken Stir Fry': 'recipe2',
        'Vegetarian Salad Bowl': 'recipe3'
      };
      
      // If it's one of our predefined recipes, show it
      if (recipeMap[recipeName]) {
        document.getElementById('recipes').scrollIntoView({behavior: 'smooth'});
        showRecipe(recipeMap[recipeName]);
      } else {
        // Otherwise, just show an alert for now
        alert(`Custom meal: ${recipeName}`);
      }
    }
    
    // Function to generate a shopping list from the current week's meals
    document.getElementById('generate-shopping-list').addEventListener('click', function() {
      const startDate = new Date(currentStartDate);
      const endDate = new Date(currentStartDate);
      endDate.setDate(endDate.getDate() + 6);
      
      // Collect all meals for the week
      const weekMeals = [];
      for (let i = 0; i < 7; i++) {
        const currentDate = new Date(currentStartDate);
        currentDate.setDate(currentDate.getDate() + i);
        const dateString = formatDate(currentDate);
        
        if (mealPlans[dateString] && mealPlans[dateString].meals) {
          mealPlans[dateString].meals.forEach(meal => {
            weekMeals.push(meal);
          });
        }
      }
      
      // Create a list of ingredients based on the recipes we know
      const recipeIngredients = {
        'Spaghetti Bolognese': [
          '500g ground beef', '1 onion, diced', '2 garlic cloves, minced', '1 carrot, diced',
          '1 celery stalk, diced', '400g canned tomatoes', '2 tbsp tomato paste', '1 tsp dried oregano',
          '400g spaghetti', 'Parmesan cheese, grated', 'Salt and pepper to taste'
        ],
        'Chicken Stir Fry': [
          '300g chicken breast, sliced', '1 bell pepper, sliced', '1 carrot, julienned', '1 cup broccoli florets',
          '2 garlic cloves, minced', '1 tbsp ginger, grated', '3 tbsp soy sauce', '1 tbsp sesame oil',
          '2 cups cooked rice'
        ],
        'Vegetarian Salad Bowl': [
          '2 cups mixed greens', '1/2 avocado, sliced', '1/4 cup cherry tomatoes, halved', '1/4 cucumber, sliced',
          '1/4 cup chickpeas, drained and rinsed', '2 tbsp feta cheese, crumbled', '1 tbsp olive oil', 
          '1 tbsp lemon juice', 'Salt and pepper to taste'
        ]
      };
      
      // Add ingredients for known recipes to the grocery list
      const groceryList = document.querySelector('#groceries ul');
      const addedIngredients = new Set();
      
      weekMeals.forEach(meal => {
        if (recipeIngredients[meal]) {
          recipeIngredients[meal].forEach(ingredient => {
            // Skip if we've already added this ingredient
            if (addedIngredients.has(ingredient)) return;
            addedIngredients.add(ingredient);
            
            // Extract quantity and name - improved regex to keep units with numbers
            const match = ingredient.match(/^((?:[\d\/\.\s]+[a-zA-Z]*)|(?:\d+\/\d+|\d+\.\d+|\d+)(?:\s*[a-zA-Z]+)?)\s*(.+)$/);
            let quantity = match && match[1] ? match[1].trim() : '';
            let name = match && match[2] ? match[2].trim() : ingredient.trim();
            
            // Create new list item
            const li = document.createElement('li');
            li.className = 'list-item';
            
            li.innerHTML = `
              <div style="display: flex; align-items: center;">
                <input type="checkbox" style="margin-right: 10px;">
                <div>
                  <span style="margin-right: 10px; font-weight: 500;">${name}</span>
                  <span style="color: #666; font-size: 0.9rem;">${quantity}</span>
                </div>
              </div>
              <button style="background: transparent; border: none; color: #ff6b6b; cursor: pointer; font-size: 1rem; margin-left: 15px;">‚úï</button>
            `;
            
            groceryList.appendChild(li);
            
            // Add delete functionality to the new button
            const deleteButton = li.querySelector('button');
            deleteButton.addEventListener('click', function() {
              li.remove();
            });
          });
        }
      });
      
      // Navigate to the grocery list section
      document.getElementById('groceries').scrollIntoView({behavior: 'smooth'});
      
      // Show confirmation
      alert('Shopping list generated from your meal plan!');
    });
    
    // Save meal plan (for now, just shows an alert)
    document.getElementById('save-meal-plan').addEventListener('click', function() {
      alert('Meal plan saved! (In a real app, this would save to a database)');
    });
    
    // Initialize the calendar when the page loads
    document.addEventListener('DOMContentLoaded', function() {
      updateCalendar();
      
      // Add click event to all delete buttons in the grocery list
      document.querySelectorAll('#groceries .list-item button').forEach(button => {
        button.addEventListener('click', function() {
          this.closest('.list-item').remove();
        });
      });
      
      // Grocery tabs functionality
      document.getElementById('tab-grocery-list').addEventListener('click', function() {
        document.getElementById('tab-grocery-list').classList.add('active');
        document.getElementById('tab-weekly-essentials').classList.remove('active');
        document.getElementById('grocery-list-content').style.display = 'block';
        document.getElementById('weekly-essentials-content').style.display = 'none';
      });
      
      document.getElementById('tab-weekly-essentials').addEventListener('click', function() {
        document.getElementById('tab-weekly-essentials').classList.add('active');
        document.getElementById('tab-grocery-list').classList.remove('active');
        document.getElementById('grocery-list-content').style.display = 'none';
        document.getElementById('weekly-essentials-content').style.display = 'block';
      });
      
      // Grocery list management buttons
      document.getElementById('remove-checked-items').addEventListener('click', function() {
        const checkedItems = document.querySelectorAll('#grocery-list-content ul input[type="checkbox"]:checked');
        
        if (checkedItems.length === 0) {
          alert('No items are checked');
          return;
        }
        
        if (confirm(`Are you sure you want to remove ${checkedItems.length} checked item(s)?`)) {
          checkedItems.forEach(checkbox => {
            checkbox.closest('.list-item').remove();
          });
        }
      });
      
      document.getElementById('remove-all-items').addEventListener('click', function() {
        const allItems = document.querySelectorAll('#grocery-list-content ul .list-item');
        
        if (allItems.length === 0) {
          alert('The grocery list is already empty');
          return;
        }
        
        if (confirm(`Are you sure you want to remove all ${allItems.length} item(s) from your grocery list?`)) {
          allItems.forEach(item => {
            item.remove();
          });
        }
      });
      
      // Initialize weekly essentials from localStorage
      const weeklyEssentials = JSON.parse(localStorage.getItem('weeklyEssentials') || '[]');
      if (weeklyEssentials.length === 0) {
        // Add default items if no items exist
        const defaultEssentials = [
          { name: 'Milk', quantity: '1 gallon' },
          { name: 'Bread', quantity: '1 loaf' },
          { name: 'Eggs', quantity: '1 dozen' },
          { name: 'Cheese', quantity: '200g' }
        ];
        defaultEssentials.forEach(item => addEssentialItem(item));
        saveEssentials();
      } else {
        // Load saved items
        const weeklyEssentialsList = document.getElementById('weekly-essentials-list');
        weeklyEssentialsList.innerHTML = '';
        weeklyEssentials.forEach(item => {
          weeklyEssentialsList.appendChild(createEssentialListItem(item));
        });
      }
      
      // Add form submission for adding new essentials
      document.getElementById('add-essential-form').addEventListener('submit', function(e) {
        e.preventDefault();
        
        const name = document.getElementById('essential-item').value.trim();
        const quantity = document.getElementById('essential-quantity').value.trim();
        
        if (!name) {
          alert('Please enter an item name');
          return;
        }
        
        const item = { name, quantity };
        addEssentialItem(item);
        saveEssentials();
        
        // Clear form fields
        document.getElementById('essential-item').value = '';
        document.getElementById('essential-quantity').value = '';
      });
      
      // Add click handler for "Add All Weekly Essentials" button
      document.getElementById('add-all-essentials').addEventListener('click', function() {
        addAllEssentialsToGroceryList();
      });
      
      // Add click handlers for "Add to Grocery" buttons
      document.querySelectorAll('.btn-add-to-grocery').forEach(button => {
        button.addEventListener('click', function() {
          const itemElement = this.closest('.list-item');
          const nameElement = itemElement.querySelector('span:first-child');
          const quantityElement = itemElement.querySelector('span:last-child');
          
          const name = nameElement.textContent;
          const quantity = quantityElement.textContent;
          
          addItemToGroceryList(name, quantity);
        });
      });
      
      // Recipe tabs functionality
      document.getElementById('tab-all-recipes').addEventListener('click', function() {
        document.querySelectorAll('.tabs .tab').forEach(tab => tab.classList.remove('active'));
        this.classList.add('active');
        document.getElementById('all-recipes-grid').style.display = 'grid';
        document.getElementById('favorites-grid').style.display = 'none';
        document.getElementById('add-recipe-form').style.display = 'none';
      });
      
      document.getElementById('tab-favorites').addEventListener('click', function() {
        document.querySelectorAll('.tabs .tab').forEach(tab => tab.classList.remove('active'));
        this.classList.add('active');
        document.getElementById('all-recipes-grid').style.display = 'none';
        document.getElementById('favorites-grid').style.display = 'grid';
        document.getElementById('add-recipe-form').style.display = 'none';
        updateFavoritesGrid();
      });
      
      document.getElementById('tab-add-recipe').addEventListener('click', function() {
        document.querySelectorAll('.tabs .tab').forEach(tab => tab.classList.remove('active'));
        this.classList.add('active');
        document.getElementById('all-recipes-grid').style.display = 'none';
        document.getElementById('favorites-grid').style.display = 'none';
        document.getElementById('add-recipe-form').style.display = 'block';
      });
      
      // Set up favorite buttons
      favorites.forEach(favorite => {
        const favoriteBtn = document.querySelector(`[onclick="toggleFavorite('${favorite.id}', '${favorite.name}')"]`);
        if (favoriteBtn) {
          favoriteBtn.innerHTML = '‚òÖ';
          favoriteBtn.style.color = '#FFD700';
        }
      });
      
      // New recipe form submission
      document.getElementById('new-recipe-form').addEventListener('submit', function(e) {
        e.preventDefault();
        
        // Get form values
        const name = document.getElementById('recipe-name').value;
        const imageUrl = document.getElementById('recipe-image-url').value || 'https://images.unsplash.com/photo-1515003197210-e0cd71810b5f?w=800&auto=format&fit=crop';
        const prepTime = document.getElementById('prep-time').value;
        const cookTime = document.getElementById('cook-time').value;
        const servings = document.getElementById('servings').value;
        const ingredients = document.getElementById('ingredients').value.split('\n');
        const instructions = document.getElementById('instructions').value.split('\n');
        
        // Create a new recipe ID
        const recipeId = 'recipe' + (document.querySelectorAll('.recipe-detail').length + 1);
        
        // Create instructions HTML
        const instructionsHtml = instructions.map((instruction, index) => `
          <div class="instruction-step" data-step="${index + 1}">
            ${instruction.trim()}
          </div>
        `).join('');
        
        // Create new recipe card
        const newRecipeCard = document.createElement('div');
        newRecipeCard.className = 'recipe-card';
        newRecipeCard.innerHTML = `
          <img src="${imageUrl}" alt="${name}" class="recipe-image" onclick="showRecipe('${recipeId}')" style="cursor: pointer;">
          <div class="recipe-content">
            <h3 class="recipe-title" onclick="showRecipe('${recipeId}')" style="cursor: pointer;">${name}</h3>
            <div class="recipe-meta">
              <div>‚è∞ ${parseInt(prepTime) + parseInt(cookTime)} min</div>
              <div>üçΩÔ∏è ${servings} serving${servings > 1 ? 's' : ''}</div>
            </div>
            <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 0.5rem;">
              <button class="btn" onclick="showRecipe('${recipeId}')">View Recipe</button>
              <button class="btn-favorite" onclick="toggleFavorite('${recipeId}', '${name}')" style="background: none; border: none; font-size: 1.5rem; cursor: pointer;">‚òÜ</button>
            </div>
          </div>
        `;
        
        // Create recipe detail view
        const recipeDetail = document.createElement('div');
        recipeDetail.id = recipeId;
        recipeDetail.className = 'recipe-detail mt-3';
        recipeDetail.style.display = 'none';
        
        // Create ingredients HTML
        const ingredientsHtml = ingredients.map(ingredient => `
          <li class="ingredient-item">
            <input type="checkbox" class="ingredient-checkbox">
            <span>${ingredient.trim()}</span>
          </li>
        `).join('');
        
        recipeDetail.innerHTML = `
          <img src="${imageUrl}" alt="${name}" class="recipe-detail-image">
          <div class="recipe-detail-content">
            <h2 class="recipe-detail-title">${name}</h2>
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
              <div class="recipe-detail-meta">
                <div>‚è∞ Prep: ${prepTime} min</div>
                <div>üç≥ Cook: ${cookTime} min</div>
                <div>üçΩÔ∏è Serves: ${servings}</div>
              </div>
              <button class="btn" onclick="addToMealPlan('${name}')">Add to Meal Plan</button>
            </div>
            
            <div class="recipe-detail-section">
              <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.75rem;">
                <h3>Ingredients</h3>
              </div>
              <ul style="list-style: none; padding: 0;">
                <li class="ingredient-item" style="margin-bottom: 0.75rem;">
                  <label style="display: flex; align-items: center; font-weight: bold; cursor: pointer;">
                    <input type="checkbox" id="select-all-${recipeId}" onchange="toggleAllIngredients('${recipeId}')" style="margin-right: 0.5rem;">
                    <span>Select All Ingredients</span>
                  </label>
                </li>
                ${ingredientsHtml}
              </ul>
              <div style="margin-top: 1rem;">
                <button class="btn btn-secondary" onclick="addIngredientsToList('${recipeId}')">Add Selected Ingredients to Shopping List</button>
              </div>
            </div>
            
            <div class="recipe-detail-section">
              <h3>Instructions</h3>
              <div class="recipe-detail-instructions">
                ${instructionsHtml}
              </div>
            </div>
            
            <div class="recipe-actions mt-3">
              <button class="btn" onclick="hideRecipe('${recipeId}')">Back to Recipes</button>
            </div>
          </div>
        `;
        
        // Add the new recipe card to the grid
        document.getElementById('all-recipes-grid').appendChild(newRecipeCard);
        
        // Add the recipe detail to the recipes section
        document.getElementById('recipes').appendChild(recipeDetail);
        
        // Add the recipe to the recipe selector in meal plan
        const recipeSelectors = document.querySelectorAll('#recipe-select');
        recipeSelectors.forEach(selector => {
          const option = document.createElement('option');
          option.value = name;
          option.textContent = name;
          selector.appendChild(option);
        });
        
        // Reset form
        this.reset();
        
        // Show success message
        alert('Recipe added successfully!');
        
        // Switch to All Recipes tab
        document.getElementById('tab-all-recipes').click();
      });
    });
    
    // Original recipe functions
    // Function to show a specific recipe
    function showRecipe(recipeId) {
      // Hide all recipes first
      document.querySelectorAll('.recipe-detail').forEach(recipe => {
        recipe.style.display = 'none';
      });
      
      // Show the selected recipe
      document.getElementById(recipeId).style.display = 'block';
      
      // Scroll to the recipe
      document.getElementById(recipeId).scrollIntoView({behavior: 'smooth'});
    }
    
    // Function to hide a recipe detail view
    function hideRecipe(recipeId) {
      document.getElementById(recipeId).style.display = 'none';
      document.getElementById('recipes').scrollIntoView({behavior: 'smooth'});
    }
    
    // Favorites functionality
    const favorites = JSON.parse(localStorage.getItem('favorites') || '[]');
    
    // Function to toggle a recipe as favorite
    function toggleFavorite(recipeId, recipeName) {
      const index = favorites.findIndex(fav => fav.id === recipeId);
      const favoriteBtn = document.querySelector(`[onclick="toggleFavorite('${recipeId}', '${recipeName}')"]`);
      
      if (index === -1) {
        // Add to favorites
        favorites.push({
          id: recipeId,
          name: recipeName
        });
        favoriteBtn.innerHTML = '‚òÖ';
        favoriteBtn.style.color = '#FFD700';
      } else {
        // Remove from favorites
        favorites.splice(index, 1);
        favoriteBtn.innerHTML = '‚òÜ';
        favoriteBtn.style.color = '';
        
        // If we're on the favorites tab, update the display
        if (document.getElementById('tab-favorites').classList.contains('active')) {
          updateFavoritesGrid();
        }
      }
      
      // Save to localStorage
      localStorage.setItem('favorites', JSON.stringify(favorites));
    }
    
    // Function to update favorites grid
    function updateFavoritesGrid() {
      const favoritesGrid = document.getElementById('favorites-grid');
      const noFavoritesMessage = document.getElementById('no-favorites-message');
      
      // Clear existing content except for the message
      Array.from(favoritesGrid.children).forEach(child => {
        if (child.id !== 'no-favorites-message') {
          child.remove();
        }
      });
      
      // Show/hide no favorites message
      if (favorites.length === 0) {
        noFavoritesMessage.style.display = 'block';
        return;
      } else {
        noFavoritesMessage.style.display = 'none';
      }
      
      // Add each favorite recipe to the grid
      favorites.forEach(favorite => {
        // Clone the original recipe card
        const originalCard = document.querySelector(`.recipe-card img[onclick="showRecipe('${favorite.id}')"]`).closest('.recipe-card');
        const cloneCard = originalCard.cloneNode(true);
        favoritesGrid.appendChild(cloneCard);
      });
    }
    
    // Function for adding a recipe to meal plan by date
    function addToMealPlan(recipeName) {
      // Create the date selection modal
      const dateModal = document.createElement('div');
      dateModal.className = 'card';
      dateModal.style.position = 'fixed';
      dateModal.style.top = '50%';
      dateModal.style.left = '50%';
      dateModal.style.transform = 'translate(-50%, -50%)';
      dateModal.style.padding = '20px';
      dateModal.style.zIndex = '1000';
      dateModal.style.maxWidth = '500px';
      dateModal.style.width = '90%';
      dateModal.style.maxHeight = '80vh';
      dateModal.style.overflowY = 'auto';
      dateModal.style.boxShadow = '0 4px 12px rgba(0,0,0,0.15)';
      
      // Create overlay
      const overlay = document.createElement('div');
      overlay.style.position = 'fixed';
      overlay.style.top = '0';
      overlay.style.left = '0';
      overlay.style.width = '100%';
      overlay.style.height = '100%';
      overlay.style.backgroundColor = 'rgba(0,0,0,0.5)';
      overlay.style.zIndex = '999';
      document.body.appendChild(overlay);
      
      dateModal.innerHTML = `
        <h3>Add "${recipeName}" to Meal Plan</h3>
        <p>Select one or more days to add this recipe:</p>
        
        <div style="margin-bottom: 15px; display: flex; gap: 10px; flex-wrap: wrap;">
          <button id="select-all-days" class="btn btn-secondary btn-sm">Select All</button>
          <button id="select-weekdays" class="btn btn-secondary btn-sm">Weekdays</button>
          <button id="select-weekends" class="btn btn-secondary btn-sm">Weekends</button>
        </div>
        
        <div style="margin-bottom: 20px; display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px;">
          ${generateDateCheckboxes()}
        </div>
        
        <div style="display: flex; justify-content: space-between;">
          <button class="btn btn-secondary" onclick="this.closest('.card').remove(); document.querySelector('body > div[style*=\'rgba\']').remove();">Cancel</button>
          <button class="btn" onclick="confirmAddToMealPlan('${recipeName}')">Add to Meal Plan</button>
        </div>
      `;
      
      document.body.appendChild(dateModal);
      
      // Set up select all/weekdays/weekends buttons
      setTimeout(() => {
        document.getElementById('select-all-days').addEventListener('click', function() {
          document.querySelectorAll('.date-checkbox').forEach(checkbox => {
            checkbox.checked = true;
          });
        });
        
        document.getElementById('select-weekdays').addEventListener('click', function() {
          document.querySelectorAll('.date-checkbox').forEach(checkbox => {
            const date = new Date(checkbox.value);
            const day = date.getDay();
            checkbox.checked = (day > 0 && day < 6); // Monday to Friday
          });
        });
        
        document.getElementById('select-weekends').addEventListener('click', function() {
          document.querySelectorAll('.date-checkbox').forEach(checkbox => {
            const date = new Date(checkbox.value);
            const day = date.getDay();
            checkbox.checked = (day === 0 || day === 6); // Sunday or Saturday
          });
        });
      }, 0);
    }
    
    // Generate date checkboxes for the next 14 days
    function generateDateCheckboxes() {
      let html = '';
      const today = new Date();
      
      for (let i = 0; i < 14; i++) {
        const date = new Date(today);
        date.setDate(today.getDate() + i);
        
        const dateString = formatDate(date);
        const displayDate = date.toLocaleDateString('en-US', { weekday: 'short', month: 'short', day: 'numeric' });
        
        html += `
          <label style="display: flex; align-items: center; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
            <input type="checkbox" class="date-checkbox" value="${dateString}" style="margin-right: 8px;">
            ${displayDate}
          </label>
        `;
      }
      
      return html;
    }
    
    // Function to confirm adding a recipe to the meal plan
    function confirmAddToMealPlan(recipeName) {
      const selectedDates = [];
      
      // Get all checked dates
      document.querySelectorAll('.date-checkbox:checked').forEach(checkbox => {
        selectedDates.push(checkbox.value);
      });
      
      if (selectedDates.length === 0) {
        alert('Please select at least one date');
        return;
      }
      
      // Add the recipe to each selected date
      selectedDates.forEach(dateString => {
        // Make sure the meal plan for this date exists
        if (!mealPlans[dateString]) {
          mealPlans[dateString] = {
            meals: []
          };
        }
        
        // Add the recipe to the meals
        mealPlans[dateString].meals.push(recipeName);
      });
      
      // Close the modal
      document.querySelector('.card[style*="z-index: 1000"]').remove();
      document.querySelector('body > div[style*="rgba"]').remove();
      
      // Update the calendar
      updateCalendar();
      
      // Show a confirmation message
      if (selectedDates.length === 1) {
        alert(`${recipeName} added to your meal plan for ${new Date(selectedDates[0]).toLocaleDateString()}`);
      } else {
        alert(`${recipeName} added to your meal plan for ${selectedDates.length} days`);
      }
    }
    
    // Function to close the meal plan modal
    function closeMealPlanModal() {
      document.getElementById('meal-plan-modal').remove();
      document.getElementById('overlay').remove();
    }
    
    // Function to toggle all ingredients in a recipe
    function toggleAllIngredients(recipeId) {
      const selectAllCheckbox = document.getElementById(`select-all-${recipeId}`);
      const ingredientCheckboxes = document.querySelectorAll(`#${recipeId} .ingredient-checkbox`);
      
      ingredientCheckboxes.forEach(checkbox => {
        checkbox.checked = selectAllCheckbox.checked;
      });
    }
    
    // Function to add ingredients to the grocery list
    function addIngredientsToList(recipeId) {
      // Get all checked ingredients
      const checkedIngredients = document.querySelectorAll(`#${recipeId} .ingredient-checkbox:checked`);
      
      if (checkedIngredients.length === 0) {
        alert('Please select at least one ingredient to add to your grocery list.');
        return;
      }
      
      // Create an array to store the ingredients
      const ingredients = [];
      
      checkedIngredients.forEach(checkbox => {
        const ingredientText = checkbox.nextElementSibling.textContent;
        ingredients.push(ingredientText);
      });
      
      // Add ingredients to grocery list
      const groceryList = document.querySelector('#groceries ul');
      
      ingredients.forEach(ingredient => {
        // Extract quantity and name - improved regex to keep units with numbers
        const match = ingredient.match(/^((?:[\d\/\.\s]+[a-zA-Z]*)|(?:\d+\/\d+|\d+\.\d+|\d+)(?:\s*[a-zA-Z]+)?)\s*(.+)$/);
        let quantity = match && match[1] ? match[1].trim() : '';
        let name = match && match[2] ? match[2].trim() : ingredient.trim();
        
        // Create a new list item
        const li = document.createElement('li');
        li.className = 'list-item';
        
        li.innerHTML = `
          <div style="display: flex; align-items: center;">
            <input type="checkbox" style="margin-right: 10px;">
            <div>
              <span style="margin-right: 10px; font-weight: 500;">${name}</span>
              <span style="color: #666; font-size: 0.9rem;">${quantity}</span>
            </div>
          </div>
          <button style="background: transparent; border: none; color: #ff6b6b; cursor: pointer; font-size: 1rem; margin-left: 15px;">‚úï</button>
        `;
        
        groceryList.appendChild(li);
        
        // Add delete functionality to the new button
        const deleteButton = li.querySelector('button');
        deleteButton.addEventListener('click', function() {
          li.remove();
        });
      });
      
      // Show confirmation and scroll to grocery list
      alert(`${checkedIngredients.length} ingredients added to your grocery list!`);
      document.getElementById('groceries').scrollIntoView({behavior: 'smooth'});
      
      // Uncheck all checkboxes
      checkedIngredients.forEach(checkbox => {
        checkbox.checked = false;
      });
    }
    
    // Weekly Essentials Helper Functions
    
    // Create an essential list item
    function createEssentialListItem(item) {
      const li = document.createElement('li');
      li.className = 'list-item';
      
      li.innerHTML = `
        <div style="display: flex; align-items: center;">
          <div>
            <span style="margin-right: 10px; font-weight: 500;">${item.name}</span>
            <span style="color: #666; font-size: 0.9rem;">${item.quantity}</span>
          </div>
        </div>
        <div>
          <button class="btn-add-to-grocery" style="margin-right: 10px; background: none; border: none; color: #4CAF50; cursor: pointer; font-size: 0.85rem;">Add to Grocery</button>
          <button class="btn-remove-essential" style="background: transparent; border: none; color: #ff6b6b; cursor: pointer; font-size: 1rem; margin-left: 5px;">‚úï</button>
        </div>
      `;
      
      // Add event listener for Add to Grocery button
      const addButton = li.querySelector('.btn-add-to-grocery');
      addButton.addEventListener('click', function() {
        addItemToGroceryList(item.name, item.quantity);
      });
      
      // Add event listener for Remove button
      const removeButton = li.querySelector('.btn-remove-essential');
      removeButton.addEventListener('click', function() {
        li.remove();
        removeEssentialItem(item);
      });
      
      return li;
    }
    
    // Add an essential item to the list
    function addEssentialItem(item) {
      const weeklyEssentialsList = document.getElementById('weekly-essentials-list');
      const li = createEssentialListItem(item);
      weeklyEssentialsList.appendChild(li);
      
      // Add to weekly essentials array
      const weeklyEssentials = JSON.parse(localStorage.getItem('weeklyEssentials') || '[]');
      weeklyEssentials.push(item);
      localStorage.setItem('weeklyEssentials', JSON.stringify(weeklyEssentials));
    }
    
    // Remove an essential item from the list
    function removeEssentialItem(item) {
      const weeklyEssentials = JSON.parse(localStorage.getItem('weeklyEssentials') || '[]');
      const index = weeklyEssentials.findIndex(i => i.name === item.name && i.quantity === item.quantity);
      
      if (index !== -1) {
        weeklyEssentials.splice(index, 1);
        localStorage.setItem('weeklyEssentials', JSON.stringify(weeklyEssentials));
      }
    }
    
    // Save essentials to localStorage
    function saveEssentials() {
      const items = [];
      const essentialItems = document.querySelectorAll('#weekly-essentials-list .list-item');
      
      essentialItems.forEach(item => {
        const nameElement = item.querySelector('span:first-child');
        const quantityElement = item.querySelector('span:last-child');
        
        const name = nameElement.textContent;
        const quantity = quantityElement.textContent;
        
        items.push({ name, quantity });
      });
      
      localStorage.setItem('weeklyEssentials', JSON.stringify(items));
    }
    
    // Add all weekly essentials to grocery list
    function addAllEssentialsToGroceryList() {
      const weeklyEssentials = JSON.parse(localStorage.getItem('weeklyEssentials') || '[]');
      
      if (weeklyEssentials.length === 0) {
        alert('You have no weekly essential items to add.');
        return;
      }
      
      weeklyEssentials.forEach(item => {
        addItemToGroceryList(item.name, item.quantity);
      });
      
      // Show confirmation and switch to grocery list tab
      alert(`${weeklyEssentials.length} essential items added to your grocery list!`);
      document.getElementById('tab-grocery-list').click();
    }
    
    // Add an item to the grocery list
    function addItemToGroceryList(name, quantity) {
      const groceryList = document.querySelector('#groceries ul');
      
      // Create a new list item
      const li = document.createElement('li');
      li.className = 'list-item';
      
      li.innerHTML = `
        <div style="display: flex; align-items: center;">
          <input type="checkbox" style="margin-right: 10px;">
          <div>
            <span style="margin-right: 10px; font-weight: 500;">${name}</span>
            <span style="color: #666; font-size: 0.9rem;">${quantity}</span>
          </div>
        </div>
        <button style="background: transparent; border: none; color: #ff6b6b; cursor: pointer; font-size: 1rem; margin-left: 15px;">‚úï</button>
      `;
      
      groceryList.appendChild(li);
      
      // Add delete functionality to the new button
      const deleteButton = li.querySelector('button');
      deleteButton.addEventListener('click', function() {
        li.remove();
      });
      
      // Switch to grocery list tab
      document.getElementById('tab-grocery-list').click();
    }
  </script>
  
  <!-- PWA Service Worker Registration -->
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('sw.js')
          .then(reg => console.log('Service Worker registered successfully', reg))
          .catch(err => console.log('Service Worker registration failed', err));
      });
    }
    
    // Add to Home Screen functionality
    let deferredPrompt;
    const installPrompt = document.createElement('div');
    installPrompt.style.display = 'none';
    installPrompt.style.position = 'fixed';
    installPrompt.style.bottom = '20px';
    installPrompt.style.left = '20px';
    installPrompt.style.right = '20px';
    installPrompt.style.padding = '15px';
    installPrompt.style.backgroundColor = '#4CAF50';
    installPrompt.style.color = 'white';
    installPrompt.style.borderRadius = '8px';
    installPrompt.style.boxShadow = '0 2px 10px rgba(0,0,0,0.2)';
    installPrompt.style.zIndex = '1000';
    installPrompt.style.textAlign = 'center';
    
    installPrompt.innerHTML = `
      <div style="display: flex; justify-content: space-between; align-items: center;">
        <div style="flex: 1; text-align: left; padding-right: 10px;">
          <strong>Install App</strong><br>
          <span style="font-size: 0.9rem;">Add this app to your home screen for quick access</span>
        </div>
        <div>
          <button id="install-button" style="background: white; color: #4CAF50; border: none; padding: 8px 15px; border-radius: 4px; font-weight: bold; cursor: pointer;">Install</button>
          <button id="close-prompt" style="background: transparent; border: none; color: white; margin-left: 10px; cursor: pointer;">‚úï</button>
        </div>
      </div>
    `;
    
    document.body.appendChild(installPrompt);
    
    // Handle beforeinstallprompt event
    window.addEventListener('beforeinstallprompt', (e) => {
      // Prevent Chrome 67 and earlier from automatically showing the prompt
      e.preventDefault();
      // Stash the event so it can be triggered later
      deferredPrompt = e;
      // Show the install prompt
      installPrompt.style.display = 'block';
    });
    
    // Setup install button
    document.getElementById('install-button').addEventListener('click', () => {
      // Hide the app provided prompt
      installPrompt.style.display = 'none';
      
      // Show the browser install prompt
      if (deferredPrompt) {
        deferredPrompt.prompt();
        
        // Wait for the user to respond to the prompt
        deferredPrompt.userChoice.then((choiceResult) => {
          if (choiceResult.outcome === 'accepted') {
            console.log('User accepted the install prompt');
          } else {
            console.log('User dismissed the install prompt');
          }
          deferredPrompt = null;
        });
      }
    });
    
    // Setup close button
    document.getElementById('close-prompt').addEventListener('click', () => {
      installPrompt.style.display = 'none';
    });
    
    // Hide the prompt if the app is already installed
    window.addEventListener('appinstalled', (evt) => {
      installPrompt.style.display = 'none';
      deferredPrompt = null;
      console.log('App was installed');
    });
  </script>
</body>
</html>

